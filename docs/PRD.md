# PRD: Enterprise Insight Agent

## 1. 제품 개요

### 1.1 비전
웹 검색만으로 기업의 현행 상황, 재무 데이터, 시장 동향을 실시간으로 수집하고 분석하는 AI 에이전트 시스템.

### 1.2 문제 정의
- 기업 분석에 필요한 정보가 다양한 소스에 분산되어 있음
- 수동 정보 수집은 시간이 많이 소요되고 누락 가능성 있음
- 기존 도구들은 정형 데이터만 처리하며 뉴스/공시 등 비정형 데이터 통합 부족
- 데이터 간 관계(산업, 경쟁사, 이벤트) 파악이 어려움

### 1.3 목표 사용자
- 투자 분석가
- 기업 리서치 담당자
- 퀀트 트레이더
- 비즈니스 인텔리전스 팀

## 2. 핵심 기능

### 2.1 기업 정보 수집 에이전트
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 실시간 뉴스 수집 | 특정 기업 관련 최신 뉴스 검색 및 요약 | P0 |
| 재무제표 데이터 | 공시 자료, 분기/연간 보고서 수집 | P0 |
| 경쟁사 분석 | 동종 업계 기업 비교 데이터 | P1 |
| 시장 동향 | 산업별 트렌드 및 전망 수집 | P1 |
| SNS/포럼 감성 | 소셜 미디어 여론 분석 | P2 |

### 2.2 Graph RAG 시스템
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 지식 그래프 구축 | 기업-산업-이벤트 관계 그래프 생성 | P0 |
| 하이브리드 검색 | Vector + Graph 조합 질의 | P0 |
| 관계 추론 | 다중 홉 질의 처리 | P1 |
| 그래프 시각화 | 관계 네트워크 시각화 | P2 |

### 2.3 주식 데이터 처리
| 기능 | 설명 | 우선순위 |
|------|------|----------|
| 실시간 시세 | 주가, 거래량 등 기본 지표 | P0 |
| 기술적 지표 | RSI, MACD, 볼린저 밴드 등 | P1 |
| 이벤트 연동 | 뉴스/공시와 주가 변동 연계 | P1 |
| 알림 시스템 | 조건부 알림 설정 | P2 |

### 2.4 Palantir AIP 통합 (선택적)
| 기능 | 설명 | 상태 |
|------|------|------|
| Ontology 연동 | Palantir 온톨로지 데이터 접근 | 권한 필요 |
| Transform 연동 | 데이터 파이프라인 통합 | 권한 필요 |
| OSDK 통합 | 애플리케이션 레벨 통합 | 권한 필요 |

## 3. 기술 아키텍처

### 3.1 시스템 다이어그램
```
┌─────────────────────────────────────────────────────────────┐
│                    User Interface                            │
│  (CLI / Web Dashboard / API)                                 │
└─────────────────┬───────────────────────────────────────────┘
                  │
┌─────────────────▼───────────────────────────────────────────┐
│               Orchestration Layer                            │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐       │
│  │ Search Agent │  │ Analysis     │  │ Stock Data   │       │
│  │              │  │ Agent        │  │ Agent        │       │
│  └──────┬───────┘  └──────┬───────┘  └──────┬───────┘       │
│         │                 │                 │                │
│  ┌──────▼─────────────────▼─────────────────▼──────┐        │
│  │            LangGraph Workflow Engine            │        │
│  └──────┬─────────────────┬─────────────────┬──────┘        │
└─────────┼─────────────────┼─────────────────┼───────────────┘
          │                 │                 │
┌─────────▼─────────────────▼─────────────────▼───────────────┐
│                    Data Layer                                │
│  ┌────────────┐  ┌────────────┐  ┌────────────┐             │
│  │ Vector DB  │  │ Graph DB   │  │ Cache      │             │
│  │ (Chroma)   │  │ (Neo4j)    │  │ (Redis)    │             │
│  └────────────┘  └────────────┘  └────────────┘             │
└─────────────────────────────────────────────────────────────┘
          │                 │                 │
┌─────────▼─────────────────▼─────────────────▼───────────────┐
│                 External Data Sources                        │
│  ┌────────┐ ┌────────┐ ┌────────┐ ┌────────┐ ┌────────────┐ │
│  │ SerpAPI│ │ Yahoo  │ │ News   │ │ SEC/   │ │ Palantir   │ │
│  │ Tavily │ │ Finance│ │ APIs   │ │ DART   │ │ AIP (옵션) │ │
│  └────────┘ └────────┘ └────────┘ └────────┘ └────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 3.2 Graph RAG 아키텍처
```
                Input Query
                    │
        ┌───────────▼───────────┐
        │   Query Analyzer      │
        │   (Intent Detection)  │
        └───────────┬───────────┘
                    │
        ┌───────────▼───────────┐
        │   Hybrid Retriever    │
        │   ┌───────┬─────────┐ │
        │   │Vector │ Graph   │ │
        │   │Search │ Traverse│ │
        │   └───┬───┴────┬────┘ │
        └───────┼────────┼──────┘
                │        │
        ┌───────▼────────▼──────┐
        │   Context Fusion      │
        │   (Re-ranking)        │
        └───────────┬───────────┘
                    │
        ┌───────────▼───────────┐
        │   LLM Generation      │
        └───────────┬───────────┘
                    │
                Response
```

### 3.3 데이터 모델 (Knowledge Graph)

**노드 타입:**
- `Company`: 기업 (name, ticker, industry, market_cap)
- `Industry`: 산업 분류 (name, sector)
- `Event`: 이벤트 (type, date, description, impact)
- `Person`: 인물 (name, role)
- `Document`: 문서 (type, source, date, content_embedding)

**관계 타입:**
- `BELONGS_TO`: Company → Industry
- `COMPETES_WITH`: Company → Company
- `AFFECTED_BY`: Company → Event
- `LED_BY`: Company → Person
- `MENTIONED_IN`: Company → Document

## 4. 개발 로드맵

### Phase 1: 핵심 수집 에이전트 (MVP)
- [ ] 프로젝트 구조 및 설정
- [ ] 웹 검색 인터페이스 구현 (SerpAPI/Tavily)
- [ ] 기본 기업 정보 수집 에이전트
- [ ] 뉴스 요약 기능
- [ ] CLI 인터페이스

### Phase 2: Graph RAG 통합
- [ ] Neo4j 그래프 DB 설정
- [ ] 지식 그래프 스키마 정의
- [ ] 엔티티/관계 추출 파이프라인
- [ ] 하이브리드 검색 구현
- [ ] 그래프 쿼리 최적화

### Phase 3: 주식 데이터 연동
- [ ] 실시간 시세 수집
- [ ] 기술적 지표 계산
- [ ] 이벤트-주가 연계 분석
- [ ] 알림 시스템

### Phase 4: 고급 기능
- [ ] Palantir AIP 통합 (권한 획득 시)
- [ ] 웹 대시보드
- [ ] 리포트 자동 생성
- [ ] API 서비스화

## 5. 성공 지표

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| 정보 수집 정확도 | >90% | 샘플 검증 |
| 응답 시간 | <10초 | 평균 쿼리 응답 시간 |
| 그래프 커버리지 | 주요 상장사 500+ | 노드 수 |
| 관계 추론 정확도 | >80% | 멀티홉 쿼리 벤치마크 |

## 6. 리스크 및 의존성

### 6.1 리스크
- **API 비용**: 검색/LLM API 사용량에 따른 비용 증가
- **데이터 품질**: 웹 검색 결과의 신뢰성 검증 필요
- **법적 이슈**: 데이터 크롤링 관련 저작권 확인

### 6.2 의존성
- **Palantir AIP**: 플랫폼 관리자 승인 필요
- **외부 API**: SerpAPI, OpenAI 등 서드파티 의존
- **그래프 DB**: Neo4j 또는 FalkorDB 인프라

## 7. 참고 자료

- [Graph RAG Guide 2025](https://salfati.group/topics/graph-rag)
- [Palantir MCP Documentation](https://www.palantir.com/docs/foundry/palantir-mcp/overview)
- [LangGraph Documentation](https://langchain-ai.github.io/langgraph/)
- [Neo4j GraphRAG](https://neo4j.com/blog/developer/graphrag-and-agentic-architecture-with-neoconverse/)
